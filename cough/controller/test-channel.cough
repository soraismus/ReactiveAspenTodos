{ Controller, Pando }      = require '../../vendor/reactive-aspen'
{ connect, getDispatcher } = Controller
{ mapping }                = Pando

log = \label \event -> console.log (label, event)

logSubscribe = \label ->
  getDispatcher(label).subscribe(log label)

[
  '$toggle-all-clicks'
  'new-todo'
  '$toggle-clicks'
  '$destroy-clicks'
  '$clear-clicks'
  '$active-todos-clicks',
  '$all-todos-clicks'
  '$completed-todos-clicks'
  'todo-in-edit',
  '$todo-label-doubleclicks'
  'terminus'
].forEach logSubscribe

completeAllTodos = \appState ->
  appState.footerProps.completed = appState.footerProps.all
  appState

connect '$toggle-clicks' 'terminus' ->
  mapping (-> completeAllTodos)

module.exports = null
